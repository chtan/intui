<h3>Task {{ tid }}</h3>
<div></div>

<br><br>

<h3>Users</h3>

<!--

I'm testing, using 8, for the first time, tokenized task page. 
The controller should be able to access the tokens under his control.
However, the controller probably should not be given the right to alter the state
in the task.

One way to handle the logic, is on Django's side instead.
Allow those with token or the coordinator to access the page.
But only those with token are allowed to alter the state of the task.

-->

<div *ngIf="tid === '8'; else notEight">
  <ul>
    <li *ngFor="let item of links">
      <a href="#" (click)="goToTokenPage($event)">{{ item }}</a>
    </li>
  </ul>
</div>
<ng-template #notEight>
  <ul>
    <li *ngFor="let item of links">
      <a [routerLink]="['/task', item]" target="_blank">{{ item }}</a>
    </li>
  </ul>
</ng-template>

<br><br>

<h3>Controls</h3>
<div>
  <div [ngSwitch]="tid">
    <div style="margin: 20px;" *ngSwitchCase="'5'">
      <mat-slide-toggle 
        [checked]="controls.auto"
        (change)="onToggleChange($event)">
        Autorun
      </mat-slide-toggle>
    </div>
  </div>
</div>

<br><br>

<h3>Statistics</h3>
<div>
  <div *ngIf="['1'].includes(tid + '')">
    <figure id="bar"></figure>
  </div>

  <div *ngIf="environment.constants.workspaceStdVar1.includes(tid + '')">
    <pre>{{ globalStatistics | json }}</pre>

    <button class="btn btn-primary" (click)="downloadData('statistics')">Download CSV</button>
  </div>
</div>

<div *ngIf="['1'].includes(tid + '')">
  <br><br>

  <h3>Web Socket</h3>
  <div>
    <input type="text" [(ngModel)]="message" placeholder="Enter message" />
    
    <br>
    
    <button (click)="sendMessage()">Send Message</button>
    <button (click)="disconnect()">Disconnect</button>
  </div>
</div>


